# üì¶ –Ü–Ω—Å—Ç—Ä—É–∫—Ü—ñ—è –∑ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è SmartInvent_1

–¶–µ–π –¥–æ–∫—É–º–µ–Ω—Ç –ø—Ä–∏–∑–Ω–∞—á–µ–Ω–∏–π –¥–ª—è Release Engineer / DevOps —ñ–Ω–∂–µ–Ω–µ—Ä–∞ —Ç–∞ –æ–ø–∏—Å—É—î –ø—Ä–æ—Ü–µ—Å –æ–Ω–æ–≤–ª–µ–Ω–Ω—è –ø—Ä–æ—î–∫—Ç—É SmartInvent_1 —É –≤–∏—Ä–æ–±–Ω–∏—á–æ–º—É —Å–µ—Ä–µ–¥–æ–≤–∏—â—ñ.

---

## üîÑ –ü—ñ–¥–≥–æ—Ç–æ–≤–∫–∞ –¥–æ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è

1. **–û—Ü—ñ–Ω–∫–∞ –∑–º—ñ–Ω**:
    - –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –Ω–æ–≤—ñ –∑–º—ñ–Ω–∏ –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—ó.
    - –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è, —â–æ –Ω–æ–≤—ñ —Ñ—É–Ω–∫—Ü—ñ—ó –∞–±–æ –∑–º—ñ–Ω–∏ –Ω–µ –≤–ø–ª–∏–≤–∞—é—Ç—å –Ω–∞ —ñ—Å–Ω—É—é—á—ñ —Ñ—É–Ω–∫—Ü—ñ—ó.

2. **–ü–ª–∞–Ω—É–≤–∞–Ω–Ω—è —á–∞—Å—É –æ–Ω–æ–≤–ª–µ–Ω–Ω—è**:
    - –û–Ω–æ–≤–ª–µ–Ω–Ω—è –º–∞—î –±—É—Ç–∏ –∑–∞–ø–ª–∞–Ω–æ–≤–∞–Ω–µ –Ω–∞ —á–∞—Å, –∫–æ–ª–∏ –Ω–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä –º—ñ–Ω—ñ–º–∞–ª—å–Ω–µ.
    - –Ø–∫—â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ, –æ–±–≥–æ–≤–æ—Ä—ñ—Ç—å –º–æ–∂–ª–∏–≤—É –∫—ñ–ª—å–∫—ñ—Å—Ç—å —á–∞—Å—É –ø—Ä–æ—Å—Ç–æ—é –∑ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞–º–∏.

3. **–ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—ñ —Å–∏—Å—Ç–µ–º–∏**:
    - –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—å, —â–æ –≤—Å—ñ –∑–æ–≤–Ω—ñ—à–Ω—ñ API-—Å–µ—Ä–≤—ñ—Å–∏ –ø—Ä–∞—Ü—é—é—Ç—å –±–µ–∑ –∑–±–æ—ó–≤.

---

## üõ†Ô∏è –°—Ç–≤–æ—Ä–µ–Ω–Ω—è —Ä–µ–∑–µ—Ä–≤–Ω–∏—Ö –∫–æ–ø—ñ–π

1. **–†–µ–∑–µ—Ä–≤–Ω–µ –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è –±–∞–∑–∏ –¥–∞–Ω–∏—Ö**:
    - –°—Ç–≤–æ—Ä—ñ—Ç—å —Ä–µ–∑–µ—Ä–≤–Ω—É –∫–æ–ø—ñ—é –≤–∞—à–æ—ó –±–∞–∑–∏ –¥–∞–Ω–∏—Ö:
      ```sh
      pg_dump -U smart_user -h localhost -F c smartinvent_prod > backup_smartinvent_prod_$(date +%F).sql
      ```
    - –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ, —á–∏ —Ä–µ–∑–µ—Ä–≤–Ω–∞ –∫–æ–ø—ñ—è —É—Å–ø—ñ—à–Ω–æ —Å—Ç–≤–æ—Ä–µ–Ω–∞ —Ç–∞ —ó—ó –¥–æ—Å—Ç—É–ø–Ω—ñ—Å—Ç—å.

2. **–†–µ–∑–µ—Ä–≤–Ω–µ –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ–π–Ω–∏—Ö —Ñ–∞–π–ª—ñ–≤**:
    - –ó—Ä–æ–±—ñ—Ç—å –∫–æ–ø—ñ—é —Ñ–∞–π–ª—ñ–≤ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ–π:
      ```sh
      cp src/main/resources/application.properties src/main/resources/application.properties.backup
      ```

---

## üîç –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Å—É–º—ñ—Å–Ω–æ—Å—Ç—ñ

1. **–ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –Ω–æ–≤–∏—Ö –∑–º—ñ–Ω**:
    - –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –Ω–æ–≤—ñ –±—ñ–±–ª—ñ–æ—Ç–µ–∫–∏ —Ç–∞ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ —Å—É–º—ñ—Å–Ω—ñ –∑ –ø–æ—Ç–æ—á–Ω–æ—é –≤–µ—Ä—Å—ñ—î—é.
    - –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—å, —â–æ –Ω–æ–≤—ñ —Ñ—É–Ω–∫—Ü—ñ—ó –∞–±–æ –∑–º—ñ–Ω–∏ –Ω–µ –ø–æ—Ç—Ä–µ–±—É—é—Ç—å –æ–Ω–æ–≤–ª–µ–Ω–Ω—è –≤ –±–∞–∑—ñ –¥–∞–Ω–∏—Ö —á–∏ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è—Ö.

2. **–¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è –Ω–∞ staging-—Å–µ—Ä–≤–µ—Ä—ñ**:
    - –Ø–∫—â–æ –º–æ–∂–ª–∏–≤–æ, –ø—Ä–æ—Ç–µ—Å—Ç—É–π—Ç–µ –Ω–æ–≤—É –≤–µ—Ä—Å—ñ—é –Ω–∞ staging-—Å–µ—Ä–µ–¥–æ–≤–∏—â—ñ, —â–æ–± –≤–∏—è–≤–∏—Ç–∏ –º–æ–∂–ª–∏–≤—ñ –ø—Ä–æ–±–ª–µ–º–∏ –ø–µ—Ä–µ–¥ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è–º —É production.

---

## üïë –ü–ª–∞–Ω—É–≤–∞–Ω–Ω—è —á–∞—Å—É –ø—Ä–æ—Å—Ç–æ—é

- –û–Ω–æ–≤–ª–µ–Ω–Ω—è –º–∞—î –±—É—Ç–∏ –ø—Ä–æ–≤–µ–¥–µ–Ω–æ –≤ –Ω–∞–π–º–µ–Ω—à –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–∏–π —á–∞—Å –¥–ª—è –º—ñ–Ω—ñ–º—ñ–∑–∞—Ü—ñ—ó –≤–ø–ª–∏–≤—É –Ω–∞ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤.
- –û–±–æ–≤'—è–∑–∫–æ–≤–æ –ø–æ–ø–µ—Ä–µ–¥—å—Ç–µ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ –ø—Ä–æ –º–æ–∂–ª–∏–≤—ñ –ø–µ—Ä–µ–±–æ—ó —É —Ä–æ–±–æ—Ç—ñ —Å–∏—Å—Ç–µ–º–∏.
  
---

## üîÑ –ü—Ä–æ—Ü–µ—Å –æ–Ω–æ–≤–ª–µ–Ω–Ω—è

1. **–ó—É–ø–∏–Ω–∫–∞ –ø–æ—Ç—Ä—ñ–±–Ω–∏—Ö —Å–ª—É–∂–±**:
    - –î–ª—è –æ–Ω–æ–≤–ª–µ–Ω–Ω—è —Å–ø–æ—á–∞—Ç–∫—É –ø–æ—Ç—Ä—ñ–±–Ω–æ –∑—É–ø–∏–Ω–∏—Ç–∏ —Å–µ—Ä–≤–µ—Ä:
      ```sh
      sudo systemctl stop smartinvent
      ```

2. **–†–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è –Ω–æ–≤–æ–≥–æ –∫–æ–¥—É**:
    - –ö–ª–æ–Ω—É–≤–∞—Ç–∏ –∞–±–æ –æ–Ω–æ–≤–∏—Ç–∏ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ–π:
      ```sh
      git pull origin main
      ```
    - –ü–æ–±—É–¥—É–≤–∞—Ç–∏ –Ω–æ–≤—É –≤–µ—Ä—Å—ñ—é:
      ```sh
      ./gradlew clean build
      ```

3. **–ú—ñ–≥—Ä–∞—Ü—ñ—è –¥–∞–Ω–∏—Ö**:
    - –Ø–∫—â–æ –∑–º—ñ–Ω–∏ –≤ –±–∞–∑—ñ –¥–∞–Ω–∏—Ö –ø–æ—Ç—Ä–µ–±—É—é—Ç—å –º—ñ–≥—Ä–∞—Ü—ñ—ó, –≤–∏–∫–æ–Ω–∞–π—Ç–µ SQL-—Å–∫—Ä–∏–ø—Ç–∏ –∞–±–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω—ñ –º—ñ–≥—Ä–∞—Ü—ñ—ó:
      ```sh
      ./gradlew flywayMigrate
      ```
    - –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —É—Å–ø—ñ—à–Ω—ñ—Å—Ç—å –º—ñ–≥—Ä–∞—Ü—ñ—ó:
      ```sh
      SELECT * FROM information_schema.tables WHERE table_schema = 'public';
      ```

4. **–û–Ω–æ–≤–ª–µ–Ω–Ω—è –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ–π**:
    - –û–Ω–æ–≤—ñ—Ç—å —Ñ–∞–π–ª–∏ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ–π (—è–∫—â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ):
      - –ù–∞–ø—Ä–∏–∫–ª–∞–¥, –∑–º—ñ–Ω—ñ—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä–∏ –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –¥–æ –±–∞–∑–∏ –¥–∞–Ω–∏—Ö –∞–±–æ —ñ–Ω—à—ñ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –≤ `application.properties`.

5. **–ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤—ñ—Å—É**:
    - –ü—ñ—Å–ª—è –æ–Ω–æ–≤–ª–µ–Ω–Ω—è —Ç–∞ –º—ñ–≥—Ä–∞—Ü—ñ—ó –¥–∞–Ω–∏—Ö, –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç—ñ—Ç—å —Å–µ—Ä–≤–µ—Ä:
      ```sh
      sudo systemctl start smartinvent
      ```

---

## ‚úÖ –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ø—ñ—Å–ª—è –æ–Ω–æ–≤–ª–µ–Ω–Ω—è

1. **–ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å—É —Å–µ—Ä–≤—ñ—Å—É**:
    - –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—å, —â–æ —Å–µ—Ä–≤—ñ—Å –ø—Ä–∞—Ü—é—î:
      ```sh
      systemctl status smartinvent
      ```

2. **–ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ª–æ–≥—ñ–≤**:
    - –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –ª–æ–≥–∏ –¥–ª—è –≤–∏—è–≤–ª–µ–Ω–Ω—è –ø–æ–º–∏–ª–æ–∫:
      ```sh
      journalctl -u smartinvent -f
      ```

3. **–ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ø—Ä–∞—Ü–µ–∑–¥–∞—Ç–Ω–æ—Å—Ç—ñ —á–µ—Ä–µ–∑ –±—Ä–∞—É–∑–µ—Ä**:
    - –í—ñ–¥–∫—Ä–∏–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä—ñ:
      [http://your_server_ip:8080](http://your_server_ip:8080)

4. **–ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ health endpoint**:
    - –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —á–µ—Ä–µ–∑ API:
      ```sh
      curl http://your_server_ip:8080/actuator/health
      ```

---

## üîÑ –ü—Ä–æ—Ü–µ–¥—É—Ä–∞ –≤—ñ–¥–∫–∞—Ç—É (rollback)

1. **–ó—É–ø–∏–Ω–∫–∞ —Å–µ—Ä–≤—ñ—Å—É**:
    - –î–ª—è –≤—ñ–¥–∫–∞—Ç—É —Å–ø–æ—á–∞—Ç–∫—É –∑—É–ø–∏–Ω—ñ—Ç—å —Å–µ—Ä–≤–µ—Ä:
      ```sh
      sudo systemctl stop smartinvent
      ```

2. **–í—ñ–¥–Ω–æ–≤–ª–µ–Ω–Ω—è —Ä–µ–∑–µ—Ä–≤–Ω–æ—ó –∫–æ–ø—ñ—ó –±–∞–∑–∏ –¥–∞–Ω–∏—Ö**:
    - –í—ñ–¥–Ω–æ–≤—ñ—Ç—å —Ä–µ–∑–µ—Ä–≤–Ω—É –∫–æ–ø—ñ—é:
      ```sh
      pg_restore -U smart_user -h localhost -d smartinvent_prod backup_smartinvent_prod_YYYY-MM-DD.sql
      ```

3. **–í—ñ–¥–Ω–æ–≤–ª–µ–Ω–Ω—è –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ–π**:
    - –í—ñ–¥–Ω–æ–≤—ñ—Ç—å —Å—Ç–∞—Ä—É –≤–µ—Ä—Å—ñ—é –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ–π–Ω–æ–≥–æ —Ñ–∞–π–ª—É:
      ```sh
      cp src/main/resources/application.properties.backup src/main/resources/application.properties
      ```

4. **–ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ —Å–µ—Ä–≤—ñ—Å—É**:
    - –ü—ñ—Å–ª—è –≤—ñ–¥–∫–∞—Ç—É –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç—ñ—Ç—å —Å–µ—Ä–≤—ñ—Å:
      ```sh
      sudo systemctl start smartinvent
      ```

5. **–ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ø—ñ—Å–ª—è –≤—ñ–¥–∫–∞—Ç—É**:
    - –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —Å—Ç–∞—Ç—É—Å —Å–µ—Ä–≤—ñ—Å—É:
      ```sh
      systemctl status smartinvent
      ```
    - –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –ª–æ–≥–∏ —Ç–∞ –ø—Ä–∞—Ü–µ–∑–¥–∞—Ç–Ω—ñ—Å—Ç—å:
      ```sh
      journalctl -u smartinvent -f
      ```

---

## üí° –ú–æ–∂–ª–∏–≤—ñ –ø—Ä–æ–±–ª–µ–º–∏ —Ç–∞ —ó—Ö –≤–∏—Ä—ñ—à–µ–Ω–Ω—è

1. **–ü–æ–º–∏–ª–∫–∏ –ø—Ä–∏ –º—ñ–≥—Ä–∞—Ü—ñ—ó –±–∞–∑–∏ –¥–∞–Ω–∏—Ö**:
    - –Ø–∫—â–æ –º—ñ–≥—Ä–∞—Ü—ñ—è –Ω–µ –≤–¥–∞—î—Ç—å—Å—è, –ø–µ—Ä–µ–≤—ñ—Ä—Ç–µ –ª–æ–≥–∏ –Ω–∞ –Ω–∞—è–≤–Ω—ñ—Å—Ç—å –ø–æ–º–∏–ª–æ–∫ SQL –∞–±–æ –∫–æ–Ω—Ñ–ª—ñ–∫—Ç—ñ–≤ –∑—ñ —Å—Ö–µ–º–æ—é.
  
2. **–ü—Ä–æ–±–ª–µ–º–∏ –∑ –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è–º –¥–æ –±–∞–∑–∏ –¥–∞–Ω–∏—Ö**:
    - –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—å, —â–æ —Å–µ—Ä–≤–µ—Ä –±–∞–∑–∏ –¥–∞–Ω–∏—Ö –ø—Ä–∞—Ü—é—î, –∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏ –≤ `application.properties` –≤—ñ—Ä–Ω—ñ.

3. **–ü—Ä–æ–≥—Ä–∞–º–Ω—ñ –∑–±–æ—ó**:
    - –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –ª–æ–≥–∏ —Å–µ—Ä–≤—ñ—Å—É –¥–ª—è –∑'—è—Å—É–≤–∞–Ω–Ω—è –ø—Ä–∏—á–∏–Ω –∑–±–æ—ó–≤.
    - –Ø–∫—â–æ –ø–æ—Ç—Ä—ñ–±–µ–Ω –≤—ñ–¥–∫–∞—Ç, —Å–∫–æ—Ä–∏—Å—Ç–∞–π—Ç–µ—Å—å –ø—Ä–æ—Ü–µ–¥—É—Ä–æ—é rollback.
